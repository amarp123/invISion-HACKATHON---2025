<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>INVISION 2025 - Mysuru Royal Institute of Technology</title>
    <meta name="description" content="INVISION 2025 - A 12-Hour National Level Hackathon by CodeISS Club, MRIT, Palahalli, Mandya">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="animated-background">
        <div class="bg-gradient"></div>
    </div>

    <nav class="navbar" id="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <span class="brand-main">invISion</span>
            </div>
            <div class="nav-menu" id="navMenu">
                <a href="#about" class="nav-link">About</a>
                <a href="#timeline" class="nav-link">Timeline</a>
                <a href="#prizes" class="nav-link">Prizes</a>
                <a href="#contact" class="nav-link">Contact</a>
                <a href="#register" class="btn-register">Register Now</a>
            </div>
            <button class="nav-toggle" id="navToggle">☰</button>
        </div>
    </nav>

    <section class="hero">
        <div class="hero-container">
            <div class="hero-content">
                <div class="hero-left">
                    <h1 class="hero-title">CodeIS Club presents</h1>
                    <h2 class="invision-logo">invISion-2025</h2>
                    <p class="hero-description">
                        A 12-Hour Internal Hackathon In <strong>MRIT</strong><br>
                        Department of Information Science & Engineering
                    </p>
                    <div class="countdown-container">
                        <div class="countdown">
                            <div class="count-item">
                                <div class="count-number" id="days">00</div>
                                <div class="count-label">Days</div>
                            </div>
                            <div class="count-item">
                                <div class="count-number" id="hours">00</div>
                                <div class="count-label">Hours</div>
                            </div>
                            <div class="count-item">
                                <div class="count-number" id="minutes">00</div>
                                <div class="count-label">Minutes</div>
                            </div>
                            <div class="count-item">
                                <div class="count-number" id="seconds">00</div>
                                <div class="count-label">Seconds</div>
                            </div>
                        </div>
                    </div>
                    <a href="#register" class="btn-primary">Register Now</a>
                </div>
                <div class="hero-right">
                    <canvas id="canvas3d"></canvas>
                </div>
            </div>
        </div>
    </section>

    <section id="about" class="section">
        <div class="container">
            <h2 class="section-title reveal">What is invISion?</h2>
            <p class="section-description reveal">
                invISion is where creativity meets innovation in a high-energy, 12-hour hackathon marathon. 
                We bring together the brightest minds to tackle real-world challenges, pushing the boundaries 
                of technology and innovation.
            </p>
            <div class="features-grid">
                <div class="feature-card reveal">
                    <h3>Coding Challenges</h3>
                    <p>Tackle intriguing programming problems and create innovative solutions that make a real impact.</p>
                </div>
                <div class="feature-card reveal">
                    <h3>Build & Deploy</h3>
                    <p>Bring your ideas to life by building functional applications and demos with cutting-edge technologies.</p>
                </div>
                <div class="feature-card reveal">
                    <h3>Collaborate & Network</h3>
                    <p>Work with talented peers and connect with industry mentors who can guide your journey.</p>
                </div>
            </div>
            <div class="schedule-link">
                <a href="#timeline" class="btn-outline">See the full schedule</a>
            </div>
        </div>
    </section>

    <section id="timeline" class="section timeline-section">
        <div class="container">
            <h2 class="section-title reveal">Event Timeline</h2>
            <p class="section-description reveal">Follow the 12-hour journey of creation and innovation.</p>
            <div class="timeline">
                <div class="timeline-item reveal">
                    <div class="timeline-time">08:00 AM</div>
                    <div class="timeline-content">
                        <h3>Reporting & Registration</h3>
                        <p>Participants check in, receive their badges, and get settled in.</p>
                    </div>
                </div>
                <div class="timeline-item reveal">
                    <div class="timeline-time">08:30 AM</div>
                    <div class="timeline-content">
                        <h3>Opening Ceremony & Briefing</h3>
                        <p>Welcome address and official start of the hackathon.</p>
                    </div>
                </div>
                <div class="timeline-item reveal">
                    <div class="timeline-time">9:00 AM</div>
                    <div class="timeline-content">
                        <h3>Problem Statements Revealed</h3>
                        <p>Exciting problem statements are unveiled to spark creativity and hackathon begins.</p>
                    </div>
                </div>
                <div class="timeline-item reveal">
                    <div class="timeline-time">01:00 PM</div>
                    <div class="timeline-content">
                        <h3>Lunch Break</h3>
                        <p>Time to refuel and network with fellow participants.</p>
                    </div>
                </div>
                <div class="timeline-item reveal">
                  <div class="timeline-time">5:00 PM</div>
                  <div class="timeline-content">
                      <h3>Evening Snacks</h3>
                      <p>Snacks to keep the energy up during the late hours.</p>
                  </div>
              </div>
              <div class="timeline-item reveal">
                <div class="timeline-time">6:00 PM</div>
                <div class="timeline-content">
                    <h3>Project Presentations</h3>
                    <p>Teams present their final projects to the judges and audience.</p>
                </div>
            </div>
                <div class="timeline-item reveal">
                    <div class="timeline-time">07:00 PM</div>
                    <div class="timeline-content">
                        <h3>Awards Ceremony</h3>
                        <p>Announcement of winners and closing remarks.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="prizes" class="section">
        <div class="container">
            <h2 class="section-title reveal">Prizes & Recognition</h2>
            <p class="section-description reveal">Compete for exciting prizes and recognition. We celebrate innovation, creativity, and excellence.</p>
            <div class="prizes-grid">
                <div class="prize-card winner reveal">
                    <div class="prize-rank">1</div>
                    <div class="prize-title">Champion Team</div>
                    <div class="prize-amount">Rs.15,000</div>
                    <div class="prize-description">The ultimate winner takes it all - glory, recognition, and the biggest reward</div>
                </div>
                <div class="prize-card runner-up reveal">
                    <div class="prize-rank">2</div>
                    <div class="prize-title">Runner-up</div>
                    <div class="prize-amount">Rs.10,000</div>
                    <div class="prize-description">Excellence deserves recognition - outstanding performance rewarded</div>
                </div>
                <div class="prize-card third reveal">
                    <div class="prize-rank">3</div>
                    <div class="prize-title">Third Place</div>
                    <div class="prize-amount">Rs.6,000</div>
                    <div class="prize-description">Bronze brilliance shines bright - creativity and innovation celebrated</div>
                </div>
            </div>
        </div>
    </section>

   

    <section id="register" class="section register-section">
        <div class="container">
            <h2 class="section-title reveal">Register for invISion - 2025</h2>
            <p class="section-description reveal">Fill the form below to register for invISion 2025. All submissions are emailed to the organizer.</p>

            <form id="regForm" class="registration-form" action="https://formspree.io/f/xdkwjqwl" method="POST">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="lead_name">Lead Name *</label>
                        <input type="text" id="lead_name" name="lead_name" placeholder="Enter your full name" required>
                    </div>
                    <div class="form-group">
                        <label for="lead_email">Lead Email *</label>
                        <input type="email" id="lead_email" name="lead_email" placeholder="Enter your email address" required>
                    </div>
                    <div class="form-group">
                        <label for="lead_phone">Phone Number *</label>
                        <input type="tel" id="lead_phone" name="lead_phone" placeholder="Enter your phone number" required>
                    </div>
                    <div class="form-group">
                        <label for="roll">Roll / College ID *</label>
                        <input type="text" id="roll" name="roll" placeholder="Enter your roll number" required>
                    </div>
                    <div class="form-group">
                        <label for="team_name">Team Name *</label>
                        <input type="text" id="team_name" name="team_name" placeholder="Enter your team name" required>
                    </div>
                    <div class="form-group">
                        <label for="domain">Domain *</label>
                        <select id="domain" name="domain" required>
                            <option value="">Select domain</option>
                            <option value="Web Development">Web Development</option>
                            <option value="Mobile App Development">Mobile App Development</option>
                            <option value="AI/ML">Artificial Intelligence & Machine Learning</option>
                            <option value="IoT">Internet of Things</option>
                            <option value="Blockchain">Blockchain Technology</option>
                            <option value="UI/UX Design">UI/UX Design</option>
                            <option value="Data Science">Data Science</option>
                            <option value="Cybersecurity">Cybersecurity</option>
                            <option value="AR/VR">Augmented Reality / Virtual Reality</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                </div>
                
                <div id="team-members-container" class="team-members-container">
                    </div>

                <div class="form-group team-member-actions">
                    <button type="button" id="add-member-btn" class="btn-outline">Add Team Member (0/3)</button>
                    <input type="hidden" id="team_members_json" name="team_members_details">
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn-primary">Submit Registration</button>
                    <div id="formStatus" class="form-status"></div>
                </div>
            </form>
        </div>
    </section>

    <section id="contact" class="section">
        <div class="container">
            <h2 class="section-title reveal">Get in Touch</h2>
            <p class="section-description reveal">Have questions about INVISION? Need assistance with registration? We're here to help you every step of the way.</p>
            <div class="contact-grid">
                <div class="contact-info">
                    <h3>Contact Information</h3>
                    <div class="contact-item">
                        <h4>Email Us</h4>
                        <p>codeis.mrit.official@gmail.com</p>
                        <span>Get in touch for any queries or assistance</span>
                    </div>
                    <div class="contact-item">
                        <h4>Call Us</h4>
                        <p>Bharath p - +91 9538530969</p>
                        <p>Amar Pujari - +91 8050760620</p>
                        <p>Swaroop P - +91 9538530969</p>
                        <p>Dhanush Urs M K- +91 6360666591</p>
                        <span>Speak directly with our team</span>
                    </div>
                    <div class="contact-item">
                        <h4>Visit Us</h4>
                        <p>Mysuru Royal Institute of Technology, Palahalli</p>
                        <p>Mandya, Karnataka - 571422</p>
                        <span>Join us at our campus location</span>
                    </div>
                </div>
                <div class="contact-details">
                    <h3>Important Details</h3>
                    <div class="detail-item">
                        <h4>Event Date</h4>
                        <p>Oct 31, 2025</p>
                        <span>12-hour intensive hackathon</span>
                    </div>
                    <div class="detail-item">
                        <h4>Registration Deadline</h4>
                        <p>Oct 28, 2025</p>
                        <span>Don't miss the opportunity</span>
                    </div>
                    <div class="detail-item">
                        <h4>Team Size</h4>
                        <p>1-4 Members</p>
                        <span>Form your dream team</span>
                    </div>
                </div>
            </div>
            <div class="cta-section">
                <h3>Ready to Spark Innovation?</h3>
                <p>Join hundreds of creative minds in this incredible journey of coding and innovation.</p>
                <div class="cta-buttons">
                    <a href="#register" class="btn-primary">Register Now</a>
                    <a href="#contact" class="btn-outline">Ask a Question</a>
                </div>
            </div>
        </div>
    </section>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-brand">
                    <span>CodeIS Club</span>
                </div>
                <div class="footer-text">
                    © 2025 invISion. All rights reserved.
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        // --- Countdown Timer ---
        const eventDate = new Date('October 31, 2025 08:00:00').getTime();

        function updateCountdown() {
            const now = new Date().getTime();
            const distance = eventDate - now;

            const days = document.getElementById('days');
            const hours = document.getElementById('hours');
            const minutes = document.getElementById('minutes');
            const seconds = document.getElementById('seconds');
            const countdownContainer = document.querySelector('.countdown-container');

            if (!days || distance < 0) {
                if (countdownContainer) {
                    countdownContainer.innerHTML = '<p style="font-size: 1.5rem; color: var(--primary-color); font-weight: 700;">Event is Live!</p>';
                }
                clearInterval(countdownInterval);
                return;
            }
            
            const d = Math.floor(distance / (1000 * 60 * 60 * 24));
            const h = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const m = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const s = Math.floor((distance % (1000 * 60)) / 1000);

            days.textContent = String(d).padStart(2, '0');
            hours.textContent = String(h).padStart(2, '0');
            minutes.textContent = String(m).padStart(2, '0');
            seconds.textContent = String(s).padStart(2, '0');
        }

        const countdownInterval = setInterval(updateCountdown, 1000);
        updateCountdown();

        // --- Three.js 3D Scene ---
        const canvas = document.getElementById('canvas3d');
        if (canvas) {
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, canvas.clientWidth / canvas.clientHeight, 0.1, 1000);
            const renderer = new THREE.WebGLRenderer({ canvas, alpha: true, antialias: true });
            
            renderer.setSize(canvas.clientWidth, canvas.clientHeight);
            renderer.setPixelRatio(window.devicePixelRatio);

            const geometry1 = new THREE.TorusGeometry(1, 0.4, 16, 100);
            const geometry2 = new THREE.IcosahedronGeometry(1.2, 0);
            const geometry3 = new THREE.OctahedronGeometry(0.8, 0);
            
            const material1 = new THREE.MeshPhongMaterial({ 
                color: 0x4de7b0, emissive: 0x4de7b0, emissiveIntensity: 0.3,
                shininess: 100, transparent: true, opacity: 0.8
            });
            const material2 = new THREE.MeshPhongMaterial({ 
                color: 0x56b6ff, emissive: 0x56b6ff, emissiveIntensity: 0.3,
                shininess: 100, wireframe: true, transparent: true, opacity: 0.6
            });
            const material3 = new THREE.MeshPhongMaterial({ 
                color: 0xff6b6b, emissive: 0xff6b6b, emissiveIntensity: 0.2,
                shininess: 100, transparent: true, opacity: 0.7
            });

            const torus = new THREE.Mesh(geometry1, material1);
            const icosahedron = new THREE.Mesh(geometry2, material2);
            const octahedron = new THREE.Mesh(geometry3, material3);
            
            scene.add(torus);
            scene.add(icosahedron);
            scene.add(octahedron);

            const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
            scene.add(ambientLight);

            const pointLight1 = new THREE.PointLight(0x4de7b0, 1, 100);
            pointLight1.position.set(5, 5, 5);
            scene.add(pointLight1);

            const pointLight2 = new THREE.PointLight(0x56b6ff, 1, 100);
            pointLight2.position.set(-5, -5, 5);
            scene.add(pointLight2);

            camera.position.z = 5;

            let mouseX = 0;
            let mouseY = 0;
            
            document.addEventListener('mousemove', (event) => {
                mouseX = (event.clientX / window.innerWidth) * 2 - 1;
                mouseY = -(event.clientY / window.innerHeight) * 2 + 1;
            });

            function animate() {
                requestAnimationFrame(animate);

                torus.rotation.x += 0.01;
                torus.rotation.y += 0.005;
                
                icosahedron.rotation.x -= 0.008;
                icosahedron.rotation.y -= 0.012;
                
                octahedron.rotation.x += 0.015;
                octahedron.rotation.z += 0.01;

                torus.rotation.y += mouseX * 0.005;
                icosahedron.rotation.x += mouseY * 0.005;
                octahedron.rotation.y -= mouseX * 0.003;

                renderer.render(scene, camera);
            }

            animate();

            window.addEventListener('resize', () => {
                const width = canvas.clientWidth;
                const height = canvas.clientHeight;
                camera.aspect = width / height;
                camera.updateProjectionMatrix();
                renderer.setSize(width, height);
            });
        }

        // --- General UI Logic ---
        
        // Mobile Navbar Toggle
        const navToggle = document.getElementById('navToggle');
        const navMenu = document.getElementById('navMenu');
        const body = document.body;

        if (navToggle && navMenu) {
            navToggle.addEventListener('click', () => {
                navMenu.classList.toggle('active');
                body.classList.toggle('menu-open');
                navToggle.textContent = navMenu.classList.contains('active') ? '✕' : '☰';
            });

            navMenu.querySelectorAll('.nav-link, .btn-register').forEach(link => {
                link.addEventListener('click', () => {
                    if (navMenu.classList.contains('active')) {
                        setTimeout(() => {
                            navMenu.classList.remove('active');
                            body.classList.remove('menu-open');
                            navToggle.textContent = '☰';
                        }, 100); 
                    }
                });
            });
        }
        
        // Navbar scroll effect
        window.addEventListener('scroll', () => {
            const navbar = document.getElementById('navbar');
            if (navbar) {
                if (window.scrollY > 50) {
                    navbar.classList.add('scrolled');
                } else {
                    navbar.classList.remove('scrolled');
                }
            }
        });

        // Create particles
        const background = document.querySelector('.animated-background');
        if (background) {
            for (let i = 0; i < 50; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 20 + 's';
                particle.style.animationDuration = (Math.random() * 10 + 15) + 's';
                background.appendChild(particle);
            }
        }

        // Scroll reveal animation
        const reveals = document.querySelectorAll('.reveal');
        
        function checkReveal() {
            reveals.forEach(element => {
                const elementTop = element.getBoundingClientRect().top;
                const elementVisible = 150;
                
                if (elementTop < window.innerHeight - elementVisible) {
                    element.classList.add('active');
                }
            });
        }

        window.addEventListener('scroll', checkReveal);
        checkReveal();

        // Smooth scroll for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                const navbarHeight = document.getElementById('navbar').offsetHeight;
                
                if (target) {
                    window.scrollTo({
                        top: target.offsetTop - navbarHeight - 20,
                        behavior: 'smooth'
                    });
                }
            });
        });

        // --- Team Member Registration Logic ---

        const teamMembersContainer = document.getElementById('team-members-container');
        const addMemberBtn = document.getElementById('add-member-btn');
        const teamMembersDetailsInput = document.getElementById('team_members_json');
        let memberCount = 0;
        const MAX_MEMBERS = 3; 
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        const phoneRegex = /^[\+]?[1-9][\d]{0,15}$/;

        function updateMemberButton() {
            addMemberBtn.textContent = `Add Team Member (${memberCount}/${MAX_MEMBERS})`;
            if (memberCount >= MAX_MEMBERS) {
                addMemberBtn.disabled = true;
                addMemberBtn.style.opacity = 0.5;
                addMemberBtn.style.cursor = 'not-allowed';
            } else {
                addMemberBtn.disabled = false;
                addMemberBtn.style.opacity = 1;
                addMemberBtn.style.cursor = 'pointer';
            }
        }

        function addTeamMember() {
            if (memberCount >= MAX_MEMBERS) return;

            memberCount++;
            const memberIndex = memberCount;
            const memberHtml = document.createElement('div');
            memberHtml.className = `member-card member-${memberIndex}`;
            memberHtml.innerHTML = `
                <div class="member-header">
                    <h4>Team Member ${memberIndex}</h4>
                    <button type="button" class="btn-remove-member" data-index="${memberIndex}">&times;</button>
                </div>
                <div class="form-grid member-grid">
                    <div class="form-group">
                        <label for="member_name_${memberIndex}">Name *</label>
                        <input type="text" id="member_name_${memberIndex}" data-field="name" data-index="${memberIndex}" placeholder="Enter member's full name" required>
                    </div>
                    <div class="form-group">
                        <label for="member_email_${memberIndex}">Email *</label>
                        <input type="email" id="member_email_${memberIndex}" data-field="email" data-index="${memberIndex}" placeholder="Enter member's email" required>
                    </div>
                    <div class="form-group">
                        <label for="member_roll_${memberIndex}">Roll / College ID *</label>
                        <input type="text" id="member_roll_${memberIndex}" data-field="roll" data-index="${memberIndex}" placeholder="Enter member's roll number" required>
                    </div>
                </div>
            `;
            teamMembersContainer.appendChild(memberHtml);

            updateMemberButton();
        }

        function removeTeamMember(index) {
            const memberCard = document.querySelector(`.member-${index}`);
            if (memberCard) {
                teamMembersContainer.removeChild(memberCard);
                memberCount--;
                updateMemberButton();
                // Re-index remaining members visually
                document.querySelectorAll('.member-card').forEach((card, i) => {
                    const newIndex = i + 1;
                    card.className = `member-card member-${newIndex}`;
                    card.querySelector('.member-header h4').textContent = `Team Member ${newIndex}`;
                    card.querySelector('.btn-remove-member').setAttribute('data-index', newIndex);
                    card.querySelectorAll('[data-index]').forEach(input => {
                        const field = input.getAttribute('data-field');
                        input.id = `member_${field}_${newIndex}`;
                        input.name = `member_${field}_${newIndex}`; 
                        input.setAttribute('data-index', newIndex);
                        input.previousElementSibling.setAttribute('for', `member_${field}_${newIndex}`);
                    });
                });
            }
        }

        addMemberBtn.addEventListener('click', addTeamMember);

        // Delegation for removing members
        teamMembersContainer.addEventListener('click', function(e) {
            if (e.target.classList.contains('btn-remove-member')) {
                const indexToRemove = parseInt(e.target.getAttribute('data-index'));
                removeTeamMember(indexToRemove);
            }
        });
        
        // Form submission and validation
        const form = document.getElementById('regForm');
        const formStatus = document.getElementById('formStatus');

        function validateForm() {
            let isValid = true;
            // Clear previous errors
            document.querySelectorAll('.error-input').forEach(el => el.classList.remove('error-input'));

            const requiredFields = form.querySelectorAll('input[required], select[required], textarea[required]');

            requiredFields.forEach(field => {
                if (!field.value.trim()) {
                    field.classList.add('error-input');
                    isValid = false;
                }
            });

            const leadEmail = document.getElementById('lead_email');
            if (leadEmail && leadEmail.value.trim() && !emailRegex.test(leadEmail.value.trim())) {
                leadEmail.classList.add('error-input');
                isValid = false;
            }

            const leadPhone = document.getElementById('lead_phone');
            if (leadPhone && leadPhone.value.trim() && !phoneRegex.test(leadPhone.value.trim().replace(/\s/g, ''))) {
                leadPhone.classList.add('error-input');
                isValid = false;
            }

            const memberInputs = teamMembersContainer.querySelectorAll('input[required]');
            memberInputs.forEach(input => {
                if (!input.value.trim()) {
                    input.classList.add('error-input');
                    isValid = false;
                } else if (input.dataset.field === 'email' && !emailRegex.test(input.value.trim())) {
                    input.classList.add('error-input');
                    isValid = false;
                }
            });

            return isValid;
        }

        function extractTeamMembersData() {
            const members = [];
            const memberCards = teamMembersContainer.querySelectorAll('.member-card');
            
            memberCards.forEach((card, index) => {
                const name = card.querySelector(`[data-field="name"]`).value.trim();
                const email = card.querySelector(`[data-field="email"]`).value.trim();
                const roll = card.querySelector(`[data-field="roll"]`).value.trim();
                
                if (name || email || roll) {
                    members.push({
                        member: index + 1,
                        name: name,
                        email: email,
                        roll: roll
                    });
                }
            });

            return JSON.stringify(members);
        }

        if (form) {
            form.addEventListener('submit', async function(e) {
                e.preventDefault();
                
                if (!validateForm()) {
                    formStatus.textContent = '❌ Please fill in all required fields and correct errors.';
                    formStatus.className = 'form-status error';
                    formStatus.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    return;
                }

                teamMembersDetailsInput.value = extractTeamMembersData();
                
                const submitBtn = form.querySelector('button[type="submit"]');
                const originalText = submitBtn.textContent;
                
                submitBtn.textContent = 'Submitting...';
                submitBtn.disabled = true;
                formStatus.textContent = '';
                formStatus.className = 'form-status';
                
                try {
                    const formData = new FormData(form);
                    
                    const response = await fetch(form.action, {
                        method: 'POST',
                        body: formData,
                        headers: {
                            'Accept': 'application/json'
                        }
                    });
                    
                    if (response.ok) {
                        formStatus.textContent = '✅ Registration submitted successfully! You will receive a confirmation email shortly.';
                        formStatus.className = 'form-status success';
                        form.reset();
                        teamMembersContainer.innerHTML = '';
                        memberCount = 0;
                        updateMemberButton();

                        formStatus.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    } else {
                        const data = await response.json();
                        formStatus.textContent = '❌ Registration failed. Please try again or contact support. (' + (data.errors ? 'Validation Error' : 'Unknown Error') + ')';
                        formStatus.className = 'form-status error';
                    }
                } catch (error) {
                    console.error('Form submission error:', error);
                    formStatus.textContent = '❌ Network error. Please check your connection and try again.';
                    formStatus.className = 'form-status error';
                } finally {
                    submitBtn.textContent = originalText;
                    submitBtn.disabled = false;
                    
                    setTimeout(() => {
                        formStatus.textContent = '';
                        formStatus.className = 'form-status';
                    }, 10000);
                }
            });
        }
        updateMemberButton();
    </script>
</body>
</html>